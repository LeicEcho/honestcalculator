<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analizador de Cuello de Botella Honesto</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: #e0e0e0; padding: 20px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 600px; background: #1e1e1e; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.7); border: 1px solid #333; }
        h1 { text-align: center; color: #00d2ff; margin-bottom: 5px; }
        .subtitle { text-align: center; color: #888; font-size: 0.9rem; margin-bottom: 30px; }
        
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #bbb; }
        select { width: 100%; padding: 12px; background: #2c2c2c; color: #fff; border: 1px solid #444; border-radius: 8px; font-size: 1rem; outline: none; transition: 0.3s; }
        select:focus { border-color: #00d2ff; background: #333; }

        button { width: 100%; padding: 15px; margin-top: 10px; background: linear-gradient(45deg, #00d2ff, #007bff); color: #fff; font-weight: bold; font-size: 1.1rem; border: none; border-radius: 8px; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 15px rgba(0, 210, 255, 0.3); }
        button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 210, 255, 0.5); }

        #resultado { margin-top: 25px; padding: 20px; border-radius: 10px; display: none; animation: fadeIn 0.5s ease; }
        
        .safe { background: rgba(21, 87, 36, 0.2); border: 1px solid #155724; color: #75b798; }
        .warning { background: rgba(133, 100, 4, 0.2); border: 1px solid #856404; color: #ffdf7e; }
        .danger { background: rgba(114, 28, 36, 0.2); border: 1px solid #721c24; color: #ea868f; }

        .meter-container { width: 100%; background: #444; height: 10px; border-radius: 5px; margin-top: 15px; overflow: hidden; position: relative; }
        .meter-fill { height: 100%; background: #888; width: 50%; transition: width 1s ease; }
        
        .debug-info { font-size: 0.75rem; color: #555; margin-top: 20px; text-align: right; font-family: monospace; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <h1>‚ö° Bottleneck Calc V2.2</h1>
    <p class="subtitle">Base de datos actualizada (Steam Charts 2025)</p>

    <div class="input-group">
        <label>1. Tu Procesador (CPU)</label>
        <select id="cpuSelect"><option value="0">-- Selecciona CPU --</option></select>
    </div>

    <div class="input-group">
        <label>2. Tu Tarjeta Gr√°fica (GPU)</label>
        <select id="gpuSelect"><option value="0">-- Selecciona GPU --</option></select>
    </div>

    <div class="input-group">
        <label>3. Resoluci√≥n de Monitor</label>
        <select id="resolution">
            <option value="1080">1080p Full HD (Est√°ndar)</option>
            <option value="1440">1440p Quad HD (Gamer)</option>
            <option value="2160">4K Ultra HD (Entusiasta)</option>
        </select>
    </div>

    <button onclick="calcularBottleneck()">ANALIZAR COMPATIBILIDAD</button>

    <div id="resultado"></div>
</div>

<script>
    // --- BASE DE DATOS FUSIONADA (ORDENADA POR POTENCIA) ---
    const hardwareData = {
      "cpus": [
        // Gama Ultra Alta
        { "name": "AMD Ryzen 9 9950X3D", "score": 70179 },
        { "name": "Intel Core Ultra 9 285K", "score": 67566 },
        // Gama Alta / Media Alta
        { "name": "AMD Ryzen 7 5800X3D (Gamer Favorite)", "score": 28295 },
        { "name": "Intel Core i5-13400F", "score": 25026 },
        { "name": "AMD Ryzen 5 5600 (Best Seller)", "score": 21549 },
        { "name": "Intel Core i5-12400F", "score": 19522 },
        { "name": "AMD Ryzen 5 3600 / PRO", "score": 17197 },
        // Gama Baja / Entrada
        { "name": "Intel Core i3-10100F", "score": 8800 },
        { "name": "Intel Core i3-10110U (Laptop)", "score": 3841 }
      ],
      "gpus": [
        // Gama Ultra Alta
        { "name": "GeForce RTX 4090", "score": 38121 },
        { "name": "GeForce RTX 4080", "score": 34463 },
        { "name": "GeForce RTX 5070 Ti (Next Gen)", "score": 32621 },
        // Gama Media / Popular
        { "name": "GeForce RTX 4060", "score": 22651 },
        { "name": "GeForce RTX 3060 Ti", "score": 20312 },
        { "name": "Radeon RX 6600 XT", "score": 16455 },
        { "name": "GeForce RTX 3060 (La m√°s usada en Steam)", "score": 15206 },
        // Gama Baja / Legendaria
        { "name": "GeForce GTX 1060 6GB", "score": 9813 }, 
        { "name": "GeForce GTX 1650 Ti", "score": 7520 }
      ]
    };

    // Cargar listas
    const cpuSelect = document.getElementById('cpuSelect');
    const gpuSelect = document.getElementById('gpuSelect');

    hardwareData.cpus.forEach(c => cpuSelect.add(new Option(c.name, c.score)));
    hardwareData.gpus.forEach(g => gpuSelect.add(new Option(g.name, g.score)));

    function calcularBottleneck() {
        const cpuScore = parseInt(cpuSelect.value);
        const gpuScore = parseInt(gpuSelect.value);
        const resolution = parseInt(document.getElementById('resolution').value);
        const resultDiv = document.getElementById('resultado');

        if (cpuScore === 0 || gpuScore === 0) {
            alert("Por favor selecciona ambos componentes");
            return;
        }

        // --- L√ìGICA DIN√ÅMICA V2.1 ---
        let scaleFactor = 1.1; 
        if (gpuScore > 25000) { scaleFactor = 1.9; }      // Gama Ultra
        else if (gpuScore > 10000) { scaleFactor = 1.4; } // Gama Media
        else { scaleFactor = 1.15; }                      // Gama Baja

        const adjustedGpuScore = gpuScore * scaleFactor;

        let resModifier = 1.0;
        if (resolution === 1440) resModifier = 0.85;
        if (resolution === 2160) resModifier = 0.65;

        const ratio = (cpuScore * resModifier) / adjustedGpuScore;

        // Diagn√≥stico
        let titulo, texto, clase, colorBarra, porcentajeBarra;

        if (ratio > 1.35) {
            clase = "warning";
            titulo = "‚ö†Ô∏è GPU LIMITANTE (Botella en Gr√°fica)";
            texto = "Tu CPU est√° sobrada. Podr√≠as poner una tarjeta gr√°fica m√°s potente sin problemas.";
            colorBarra = "#ffc107"; porcentajeBarra = "90%"; 
        } else if (ratio < 0.80) { // Ajust√© un poco el l√≠mite inferior
            clase = "danger";
            titulo = "üõë CPU LIMITANTE (Botella en Procesador)";
            texto = "Tu procesador es demasiado lento para esta gr√°fica en esta resoluci√≥n. Sufrir√°s tirones.";
            colorBarra = "#dc3545"; porcentajeBarra = "20%";
        } else {
            clase = "safe";
            titulo = "‚úÖ SINERGIA EXCELENTE";
            texto = "¬°Perfecto! Tus componentes est√°n equilibrados. Buen trabajo de selecci√≥n.";
            colorBarra = "#28a745"; porcentajeBarra = "50%";
        }

        resultDiv.style.display = "block";
        resultDiv.className = clase;
        resultDiv.innerHTML = `
            <h2 style="margin-top:0">${titulo}</h2>
            <p>${texto}</p>
            <div class="meter-container"><div class="meter-fill" style="width: ${porcentajeBarra}; background: ${colorBarra};"></div></div>
            <div class="debug-info">V2.2 | Escala: x${scaleFactor} | Ratio: ${ratio.toFixed(2)}</div>
        `;
    }
</script>

</body>
</html>
