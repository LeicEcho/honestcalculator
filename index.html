<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analizador de Cuello de Botella V2.0</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: #e0e0e0; padding: 20px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 600px; background: #1e1e1e; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.7); border: 1px solid #333; }
        h1 { text-align: center; color: #00d2ff; margin-bottom: 5px; }
        .subtitle { text-align: center; color: #888; font-size: 0.9rem; margin-bottom: 30px; }
        
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #bbb; }
        select { width: 100%; padding: 12px; background: #2c2c2c; color: #fff; border: 1px solid #444; border-radius: 8px; font-size: 1rem; outline: none; transition: 0.3s; }
        select:focus { border-color: #00d2ff; background: #333; }

        button { width: 100%; padding: 15px; margin-top: 10px; background: linear-gradient(45deg, #00d2ff, #007bff); color: #fff; font-weight: bold; font-size: 1.1rem; border: none; border-radius: 8px; cursor: pointer; transition: 0.3s; box-shadow: 0 4px 15px rgba(0, 210, 255, 0.3); }
        button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 210, 255, 0.5); }

        #resultado { margin-top: 25px; padding: 20px; border-radius: 10px; display: none; animation: fadeIn 0.5s ease; }
        
        /* Estados del Resultado */
        .safe { background: rgba(21, 87, 36, 0.2); border: 1px solid #155724; color: #75b798; }
        .warning { background: rgba(133, 100, 4, 0.2); border: 1px solid #856404; color: #ffdf7e; }
        .danger { background: rgba(114, 28, 36, 0.2); border: 1px solid #721c24; color: #ea868f; }

        .meter-container { width: 100%; background: #444; height: 10px; border-radius: 5px; margin-top: 15px; overflow: hidden; position: relative; }
        .meter-fill { height: 100%; background: #888; width: 50%; transition: width 1s ease; }
        
        .debug-info { font-size: 0.75rem; color: #555; margin-top: 20px; text-align: right; font-family: monospace; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <h1>‚ö° Bottleneck Calc V2</h1>
    <p class="subtitle">Algoritmo Din√°mico por Gemini & Ingeniero Usuario</p>

    <div class="input-group">
        <label>1. Tu Procesador (CPU)</label>
        <select id="cpuSelect"></select>
    </div>

    <div class="input-group">
        <label>2. Tu Tarjeta Gr√°fica (GPU)</label>
        <select id="gpuSelect"></select>
    </div>

    <div class="input-group">
        <label>3. Resoluci√≥n de Monitor</label>
        <select id="resolution">
            <option value="1080">1080p Full HD (Est√°ndar)</option>
            <option value="1440">1440p Quad HD (Gamer)</option>
            <option value="2160">4K Ultra HD (Entusiasta)</option>
        </select>
    </div>

    <button onclick="calcularBottleneck()">ANALIZAR COMPATIBILIDAD</button>

    <div id="resultado"></div>
</div>

<script>
    // BASE DE DATOS COMPLETA (Tus hallazgos)
    const hardwareData = {
      "cpus": [
        { "name": "Intel Core Ultra 9 285K (Gama Alta)", "score": 67566 },
        { "name": "AMD Ryzen 9 9950X3D (Gama Alta)", "score": 70179 },
        { "name": "AMD Ryzen 5 5600 (Gama Media)", "score": 21549 },
        { "name": "Intel Core i3-10110U (Laptop/Baja)", "score": 3841 },
        { "name": "Intel Core i3-10100F (Escritorio/Baja)", "score": 8800 } // Agregu√© la versi√≥n desktop para comparar
      ],
      "gpus": [
        { "name": "GeForce RTX 4090 (Monstruo)", "score": 38121 },
        { "name": "GeForce RTX 3060 (Gama Media)", "score": 15206 },
        { "name": "GeForce GTX 1650 Ti (Gama Baja)", "score": 7520 }
      ]
    };

    // Cargar listas
    const cpuSelect = document.getElementById('cpuSelect');
    const gpuSelect = document.getElementById('gpuSelect');

    hardwareData.cpus.forEach(c => cpuSelect.add(new Option(c.name, c.score)));
    hardwareData.gpus.forEach(g => gpuSelect.add(new Option(g.name, g.score)));

    function calcularBottleneck() {
        const cpuScore = parseInt(cpuSelect.value);
        const gpuScore = parseInt(gpuSelect.value);
        const resolution = parseInt(document.getElementById('resolution').value);
        const resultDiv = document.getElementById('resultado');

        // --- L√ìGICA DIN√ÅMICA V2 (El Coraz√≥n del Algoritmo) ---
        
        // Paso 1: Determinar Factor de Escala seg√∫n la potencia de la GPU
        // Las GPUs High-End escalan diferente en PassMark que las Low-End
        let scaleFactor = 1.1; // Valor base para gama baja

        if (gpuScore > 25000) {
            scaleFactor = 1.9; // Para RTX 4090, etc.
        } else if (gpuScore > 10000) {
            scaleFactor = 1.4; // Para RTX 3060, etc. (1.41 dio el c√°lculo real)
        } else {
            scaleFactor = 1.15; // Para gama baja (Ajuste fino)
        }

        const adjustedGpuScore = gpuScore * scaleFactor;

        // Paso 2: Modificador de Resoluci√≥n
        let resModifier = 1.0; // 1080p
        if (resolution === 1440) resModifier = 0.85;
        if (resolution === 2160) resModifier = 0.65;

        // Paso 3: El Ratio Final
        const ratio = (cpuScore * resModifier) / adjustedGpuScore;

        // Diagn√≥stico
        let titulo, texto, clase, colorBarra, porcentajeBarra;

        if (ratio > 1.35) {
            clase = "warning";
            titulo = "‚ö†Ô∏è GPU LIMITANTE (Botella en Gr√°fica)";
            texto = "Tu CPU est√° sobrada. Podr√≠as poner una tarjeta gr√°fica m√°s potente sin problemas. No es grave, solo est√°s desaprovechando procesador.";
            colorBarra = "#ffc107"; // Amarillo
            porcentajeBarra = "90%"; 
        } else if (ratio < 0.75) {
            clase = "danger";
            titulo = "üõë CPU LIMITANTE (Botella en Procesador)";
            texto = "Atenci√≥n: Tu procesador es demasiado lento para esta gr√°fica en esta resoluci√≥n. Sufrir√°s tirones y ca√≠das de FPS.";
            colorBarra = "#dc3545"; // Rojo
            porcentajeBarra = "20%";
        } else {
            clase = "safe";
            titulo = "‚úÖ SINERGIA EXCELENTE";
            texto = "¬°Perfecto! Tus componentes est√°n equilibrados. Ninguno frena dr√°sticamente al otro.";
            colorBarra = "#28a745"; // Verde
            porcentajeBarra = "50%";
        }

        // Renderizar
        resultDiv.style.display = "block";
        resultDiv.className = clase;
        resultDiv.innerHTML = `
            <h2 style="margin-top:0">${titulo}</h2>
            <p>${texto}</p>
            <div class="meter-container">
                <div class="meter-fill" style="width: ${porcentajeBarra}; background: ${colorBarra};"></div>
            </div>
            <div class="debug-info">
                Algoritmo: V2.1 Dynamic<br>
                Factor Escala Aplicado: x${scaleFactor}<br>
                Ratio Final: ${ratio.toFixed(2)} (Ideal: 0.8 - 1.3)
            </div>
        `;
    }
</script>

</body>
</html>